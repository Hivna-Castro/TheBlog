<h1><%= t('application.posts.my_posts') %></h1>

<% if @posts.any? %>
  <ul>
    <% @posts.each do |post| %>
      <li>
        <h3><%= post.title %></h3>
        <p><%= post.content.truncate(200) %></p>
        <p><small><%= t('application.posts.published_on', date: post.created_at.strftime('%d/%m/%Y')) %></small></p>

        <% if post.tags.any? %>
          <div class="tags-container">
            <% post.tags.each do |tag| %>
              <span class="tag">
                <%= tag.name %>
                <%= form_with url: post_tag_path(post_id: post.id, id: tag.id), method: :delete, data: { confirm: t('tags.confirm_remove') }, local: true do |form| %>
                  <%= form.submit 'X', class: 'btn btn-danger' %>
                <% end %>
              </span>
            <% end %>
          </div>
        <% end %>

        <div>
          <%= link_to t('application.posts.edit'), edit_post_path(post), class: 'btn btn-primary' %>
          <%= form_with url: post_path(post), method: :delete, data: { confirm: t('posts.confirm_delete') }, local: true do |form| %>
            <%= form.submit t('application.posts.delete'), class: 'btn btn-danger' %>
          <% end %>
        </div>
      </li>
    <% end %>
  </ul>
<% else %>
  <p><%= t('application.posts.no_posts') %></p>
<% end %>

<%= link_to t('application.posts.back'), posts_path %>